<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="ROBOTS" content="INDEX, FOLLOW" />
    <meta name="VIEWPORT" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://saxobank.github.io/openapi-samples-js/assets/css/style.css">
    <script type="text/javascript" src="../../assets/js/boilerplate.js" defer></script>
    <script type="text/javascript" src="demo.js" defer></script>
    <title>Demonstration on extended AssetTypes</title>
</head>
<body>
<section class="page-header">
<h1 class="project-name">Extended AssetTypes</h1>
<h2 class="project-tagline">Prepare for Stocks being differentiated into Stocks, ETF, ETC, ETN</h2>
<a href="https://saxobank.github.io/openapi-samples-js" class="btn">← Back to main page</a>
<a href="https://github.com/SaxoBank/openapi-samples-js" class="btn">View on GitHub</a>
</section>
<section class="main-content">
<div class="highlight">
<label><span>Add token <a href="https://www.developer.saxo/openapi/token" target="_blank" id="idHrefRetrieveToken">from here</a> to the box below:</span><br />
<input type="text" class="token-field" id="idBearerToken" value="" placeholder="Paste token here.." autofocus /></label>
<input type="button" class="action-button" value="Validate" id="idBtnValidate" /><br />
<label>
    Account: <select class="selector" id="idCbxAccount">
        <option value="-">Click Validate to populate</option>
    </select>
</label>
</div>
<h1>Stocks were split into Stocks, ETFs, ETCs and ETNs</h1>
<p>Since November 2021, newly created apps and the Explorer on the Delevoper Portal are on Extended AssetTypes.<br />
This is quite a change, because Stocks for example, are split into Stocks, ETFs, ETCs and ETNs. More info: <a href="https://www.developer.saxo/openapi/learn/extended-assettypes" target="_blank">https://www.developer.saxo/openapi/learn/extended-assettypes</a>.<br />
This sample demonstrates this change, and shows how to verify the new behavoir usings apps created before this date.<br />

You can use your old app for Extended AssetTypes by sending an extra header, the "Pragma" header oapi-x-extasset. This header makes the app behave like it is on Extended AssetTypes.<br />
After a successful test, you can create a new app, so the AssetTypes are extended by default.<br />
If you have no plans for your application to support the new asset types, then the only thing is to keep in mind, that Explorer on the Developer Portal is on Extended AssetTypes, so responses between Explorer and your app can differ.<br />
</p>
<h2>Using the oapi-x-extasset header</h2>
<p>
It is possible for an application created before November 2021 to instruct OpenApi to act as if the application was configured for the Extended AssetType definition.<br />
This is done by adding a header named 'Pragma' with the value 'oapi-x-extasset' in the request. Below are some examples of this. This header can be used for validation, but also to have groups of customers on Extended AssetTypes, and others on the legacy AssetTypes.
</p>
Keep in mind that we are gradually removing the legacy AssetTypes, so new developments should be using Extended AssetTypes only.
<br />
<br />
<input type="button" class="action-button" value="Authenticate with app on legacy AssetTypes" id="idBtnGetTokenOnLegacyAssetTypes" />
<input type="button" class="action-button" value="Authenticate with app on Extended AssetTypes" id="idBtnGetTokenOnExtendedAssetTypes" /><br />
<label><input type="checkbox" id="idChkExtAsset" value="ExtAsset" checked> Add Pragma=oapi-x-extasset header</label>
<br />
<br />
<input type="button" class="action-button" value="Get legal AssetTypes" id="idBtnGetLegalAssetTypes" /><br />
<input type="button" class="action-button" value="Look for name 'iShares'" id="idBtnSearchIshares" />
<input type="button" class="action-button" value="Find an ETF" id="idBtnFindEtf" /><br />
<label>Instrument Uic: <input type="text" class="text-field" id="idUic" value="34912" placeholder="Enter instrument Uic.." /></label><br />
<input type="button" class="action-button" value="Get prices of the found ETF" id="idBtnGetPrices" />
<input type="button" class="action-button" value="Get prices of the found ETF as Stock" id="idBtnGetPricesAsStock" />
<br />
Response: <pre class="highlight" id="idResponse">Click button to launch function.</pre>
<br />
JS code: <pre class="code-block" id="idJavaScript">Click button to show code.</pre>
<footer class="site-footer"><span class="site-footer-credits" id="idFooter"></span></footer>
</section>
</body>
</html>
